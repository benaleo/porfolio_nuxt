// Prisma schema for CMS

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

enum ProjectCategory {
  Backend
  Frontend
  Fullstack
  Other
}

model Profile {
  id               Int      @id @default(1)
  name             String
  avatar           String?  // /uploads/<file>
  bio              String?
  contactNumber    String?
  github           String?
  linkedin         String?
  email            String?
  impactYears      Int      @default(0)
  impactProjects   Int      @default(0)
  impactOss        Int      @default(0)
  updatedAt        DateTime @updatedAt
}

model BlogPost {
  id          Int       @id @default(autoincrement())
  title       String
  slug        String    @unique
  content     String    // markdown or rich text
  thumbnail   String?
  publishedAt DateTime?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
}

model Project {
  id          Int              @id @default(autoincrement())
  title       String
  description String
  category    ProjectCategory
  image       String?
  tags        String[]         @default([])
  createdAt   DateTime         @default(now())
  updatedAt   DateTime         @updatedAt
}

model Education {
  id          Int      @id @default(autoincrement())
  year        String
  institution String
  major       String
  summary     String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Experience {
  id          Int      @id @default(autoincrement())
  startYear   Int
  endYear     Int?
  position    String
  company     String
  summary     String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model RequestContact {
  id        Int      @id @default(autoincrement())
  name      String
  email     String
  message   String
  createdAt DateTime @default(now())
}

model LogTrafic {
  id        Int      @id @default(autoincrement())
  browser   String
  os        String
  country   String?
  ip        String?
  url       String
  createdAt DateTime @default(now())
}
